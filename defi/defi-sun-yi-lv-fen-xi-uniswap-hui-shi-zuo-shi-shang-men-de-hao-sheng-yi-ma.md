# 【DeFi】损益率分析：Uniswap会是做市商们的好生意吗？

{% embed url="https://docs.ethhub.io/guides/graphical-guide-for-understanding-uniswap/" %}

{% embed url="https://www.jinse.com/blockchain/340718.html" %}

## 损益率分析：Uniswap会是做市商们的好生意吗？

[橙皮书](https://www.jinse.com/member/124096) 2019/04/04 13:27 

* ![](data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTdweCIgaGVpZ2h0PSIxM3B4IiB2aWV3Qm94PSIwIDAgMTcgMTMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ5LjEgKDUxMTQ3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5QYWdlIDE8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iU3ltYm9scyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWbvuaghy/pmIXor7siIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAtMi4wMDAwMDApIiBmaWxsPSIjOUI5QjlCIj4KICAgICAgICAgICAgPHBhdGggZD0iTTE2LjA0NzI0NDEsOC4xMDIzNjMyMSBDMTYuMDE1NzQ4LDguMDM5MzY5MDcgMTUuODE2Mjc1Nyw3LjcwMzQxNDQzIDE1LjQ0ODgxODksNy4wOTQ0ODkyIEMxNS4wODEzNjIxLDYuNDg1NTYxOTUgMTQuNTU5MDU3Niw1LjgyNjc3NTE4IDEzLjg4MTg4OTMsNS4xMTgxMTA3NCBDMTMuMjA0NzIwOSw0LjQwOTQ0NDI4IDEyLjM3Nzk1NzgsMy43NjY0MDY1NSAxMS40MDE1NzM4LDMuMTg4OTc3MzkgQzEwLjQyNTE5MTgsMi42MTE1NDYyIDkuMzA3MDkyNjYsMi4zMjI4MzQ2NSA4LjA0NzI0NDA5LDIuMzIyODM0NjUgQzYuNzg3Mzk1NTMsMi4zMjI4MzQ2NSA1LjY2OTI5NjM4LDIuNjExNTQ2MiA0LjY5MjkxNDM5LDMuMTg4OTc3MzkgQzMuNzE2NTMwMzksMy43NjY0MDY1NSAyLjg4OTc2NzMxLDQuNDA5NDQ0MjggMi4yMTI1OTg5Myw1LjExODExMDc0IEMxLjUzNTQyOTc0LDUuODI2Nzc1MTggMS4wMTMxMjUyNCw2LjQ4NTU2MTk1IDAuNjQ1NjY5MjkxLDcuMDk0NDg5MiBDMC4yNzgyMTMzNDIsNy43MDM0MTQ0MyAwLjA3ODc0MDMxODcsOC4wMzkzNjkwNyAwLjA0NzI0NDA5NDUsOC4xMDIzNjMyMSBDMC4wMTU3NDc4NzAyLDguMjA3MzQ5NDIgMCw4LjMwOTcxMTEyIDAsOC40MDk0NDgzMSBDMCw4LjUwOTE4NzUzIDAuMDE1NzQ3ODcwMiw4LjYxMTU0NzIxIDAuMDQ3MjQ0MDk0NSw4LjcxNjUzNTQzIEMwLjA3ODc0MDMxODcsOC43NTg1Mjk1MSAwLjI3ODIxMzM0Miw5LjA4Mzk4NjE0IDAuNjQ1NjY5MjkxLDkuNjkyOTEzMzkgQzEuMDEzMTI1MjQsMTAuMjkxMzQwNiAxLjUzNTQyOTc0LDEwLjk0MjI1MzkgMi4yMTI1OTg5MywxMS42NDU2NjkzIEMyLjg4OTc2NzMxLDEyLjM0OTA4NDcgMy43MTY1MzAzOSwxMi45ODQyNDkxIDQuNjkyOTE0MzksMTMuNTUxMTgxMSBDNS42NjkyOTYzOCwxNC4xMjg2MTE5IDYuNzg3Mzk1NTMsMTQuNDE3MzIyOCA4LjA0NzI0NDA5LDE0LjQxNzMyMjggQzkuMzA3MDkyNjYsMTQuNDE3MzIyOCAxMC40MjUxOTE4LDE0LjEyODYxMTkgMTEuNDAxNTczOCwxMy41NTExODExIEMxMi4zNzc5NTc4LDEyLjk3Mzc1MDMgMTMuMjA0NzIwOSwxMi4zMzMzMzc3IDEzLjg4MTg4OTMsMTEuNjI5OTIyMyBDMTQuNTU5MDU3NiwxMC45MjY1MDQ4IDE1LjA4MTM2MjEsMTAuMjcwMzQ0NiAxNS40NDg4MTg5LDkuNjYxNDE3MzIgQzE1LjgxNjI3NTcsOS4wNTI0OTAwOCAxNi4wMTU3NDgsOC43MTEyODY0MyAxNi4wNDcyNDQxLDguNjM3Nzk0MjcgQzE2LjA3ODc0MDIsOC41NzQ4MDIxNCAxNi4wOTQ0ODkyLDguNDg4MTg5NDggMTYuMDk0NDg5Miw4LjM3Nzk1MjI1IEMxNi4wOTQ0ODkyLDguMjY3NzE1MDIgMTYuMDc4NzQwMiw4LjE3NTg1MzM1IDE2LjA0NzI0NDEsOC4xMDIzNjMyMSBaIE04LjA0NzI0NDA5LDEzLjA3ODc0MDIgQzcuMTQ0MzUyMjUsMTMuMDc4NzQwMiA2LjMyMDIxMzY3LDEyLjg4NDUxNjQgNS41NzQ4MDQxNiwxMi40OTYwNjMgQzQuODI5MzkyNjMsMTIuMTA3NjEwMiA0LjE3NTg1NDg3LDExLjY1MzU0NjggMy42MTQxNzI3MiwxMS4xMzM4NTg4IEMzLjA1MjQ5MDU4LDEwLjYxNDE3MDcgMi41ODI2NzgxNywxMC4wOTE4NjYyIDIuMjA0NzIzNCw5LjU2NjkyOTEzIEMxLjgzNzI2ODQ2LDkuMDQxOTkyMDYgMS41Njk1NTQ3NSw4LjY0MzA0NTI5IDEuNDAxNTc0OCw4LjM3MDA3ODc0IEMxLjU0ODU1NzEsOC4xMDc2MTAyIDEuODA1NzcyNCw3LjcxMzkxMjQ0IDIuMTczMjI5MzUsNy4xODg5NzUzNyBDMi41NTExODIxMSw2LjY2NDA0MDMxIDMuMDIzNjE5MDIsNi4xNDE3MzU4MSAzLjU5MDU1MDE3LDUuNjIyMDQ3NzUgQzQuMTU3NDgzMzQsNS4xMDIzNTk2OSA0LjgxMzY0MzU5LDQuNjQ4Mjk2MzEgNS41NTkwNTUxMiw0LjI1OTg0MzUzIEM2LjMxNDk2NDY2LDMuODcxMzg4NzIgNy4xNDQzNTIyNSwzLjY3NzE2NTM1IDguMDQ3MjQ0MDksMy42NzcxNjUzNSBDOC45NTAxMzU5NCwzLjY3NzE2NTM1IDkuNzc0Mjc0NTIsMy44NzEzODg3MiAxMC41MTk2ODQsNC4yNTk4NDM1MyBDMTEuMjY1MDk1Niw0LjY0ODI5NjMxIDExLjkxODYzMzMsNS4xMDIzNTk2OSAxMi40ODAzMTU1LDUuNjIyMDQ3NzUgQzEzLjA0MTk5NzYsNi4xNDE3MzU4MSAxMy41MTE4MSw2LjY2NDA0MDMxIDEzLjg4OTc2NDgsNy4xODg5NzUzNyBDMTQuMjU3MjE5NSw3LjcxMzkxMjQ0IDE0LjUyNDkzMyw4LjEwNzYxMDIgMTQuNjkyOTEzNCw4LjM3MDA3ODc0IEMxNC41MjQ5MzMsOC42NDMwNDUyOSAxNC4yNTcyMTk1LDkuMDQxOTkyMDYgMTMuODg5NzY0OCw5LjU2NjkyOTEzIEMxMy41MTE4MSwxMC4wOTE4NjYyIDEzLjA0MTk5NzYsMTAuNjE0MTcwNyAxMi40ODAzMTU1LDExLjEzMzg1ODggQzExLjkxODYzMzMsMTEuNjUzNTQ2OCAxMS4yNjUwOTU2LDEyLjEwNzYxMDIgMTAuNTE5Njg0LDEyLjQ5NjA2MyBDOS43NzQyNzQ1MiwxMi44ODQ1MTY0IDguOTUwMTM1OTQsMTMuMDc4NzQwMiA4LjA0NzI0NDA5LDEzLjA3ODc0MDIgWiBNOC4wNDcyNDQwOSw1LjY5MjkxMzM5IEM3LjMxMjMzMjYsNS42OTI5MTMzOSA2LjY3OTc5Mjg4LDUuOTU1Mzc3ODkgNi4xNDk2MDY4LDYuNDgwMzE0OTYgQzUuNjE5NDIwNzIsNy4wMDUyNTIwMyA1LjM1NDMyOTcsNy42MzUxNjcyNCA1LjM1NDMyOTcsOC4zNzAwNzg3NCBDNS4zNTQzMjk3LDkuMTE1NDkwMjcgNS42MTk0MjA3Miw5Ljc1MDY1NDQ5IDYuMTQ5NjA2OCwxMC4yNzU1ODk1IEM2LjY3OTc5Mjg4LDEwLjgwMDUyNjYgNy4zMTIzMzI2LDExLjA2Mjk5MzEgOC4wNDcyNDQwOSwxMS4wNjI5OTMxIEM4Ljc4MjE1NTU5LDExLjA2Mjk5MzEgOS40MTQ2OTUzMSwxMC44MDA1MjY2IDkuOTQ0ODgxMzksMTAuMjc1NTg5NSBDMTAuNDc1MDY3NSw5Ljc1MDY1NDQ5IDEwLjc0MDE1ODUsOS4xMTU0OTAyNyAxMC43NDAxNTg1LDguMzcwMDc4NzQgQzEwLjc0MDE1ODUsNy42MzUxNjcyNCAxMC40NzUwNjc1LDcuMDA1MjUyMDMgOS45NDQ4ODEzOSw2LjQ4MDMxNDk2IEM5LjQxNDY5NTMxLDUuOTU1Mzc3ODkgOC43ODIxNTU1OSw1LjY5MjkxMzM5IDguMDQ3MjQ0MDksNS42OTI5MTMzOSBaIE04LjA0NzI0NDA5LDkuNzI0NDA5NDUgQzcuNjc5Nzg3MzQsOS43MjQ0MDk0NSA3LjM2NDgzMDc0LDkuNTkzMTc2MTkgNy4xMDIzNjIyLDkuMzMwNzA3NjUgQzYuODM5ODkzNjcsOS4wNjgyNDExMyA2LjcwODY2MjQzLDguNzQ4MDMzNTEgNi43MDg2NjI0Myw4LjM3MDA3ODc0IEM2LjcwODY2MjQzLDguMDAyNjIxOTggNi44Mzk4OTM2Nyw3LjY4NzY2NTM5IDcuMTAyMzYyMiw3LjQyNTE5Njg1IEM3LjM2NDgzMDc0LDcuMTYyNzI4MzEgNy42Nzk3ODczNCw3LjAzMTQ5NzA3IDguMDQ3MjQ0MDksNy4wMzE0OTcwNyBDOC40MTQ3MDA4NSw3LjAzMTQ5NzA3IDguNzI5NjU3NDUsNy4xNjI3MjgzMSA4Ljk5MjEyNTk4LDcuNDI1MTk2ODUgQzkuMjU0NTk0NTIsNy42ODc2NjUzOSA5LjM4NTgyNTc2LDguMDAyNjIxOTggOS4zODU4MjU3Niw4LjM3MDA3ODc0IEM5LjM4NTgyNTc2LDguNzQ4MDMzNTEgOS4yNTQ1OTQ1Miw5LjA2ODI0MTEzIDguOTkyMTI1OTgsOS4zMzA3MDc2NSBDOC43Mjk2NTc0NSw5LjU5MzE3NjE5IDguNDE0NzAwODUsOS43MjQ0MDk0NSA4LjA0NzI0NDA5LDkuNzI0NDA5NDUgWiIgaWQ9IlBhZ2UtMSI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+)
* 7.4万

在Uniswap模式中，做市商们获得的收益是累计的交易费与由价格波动导致的暂时性亏损（impermanent loss）之间的差值。之前Pintail曾探讨过在Uniswap中由于ETH价格波动给做市商带来的损失，Mohamed Fouda则在最近的一篇文章中将交易费用影响也考虑了进去，对损益率（P / L）进行了建模分析。相信对想要为Uniswap增加流动性，并思考如何使利润最大化的做市商们会有新的启发。本文翻译自加密货币研究者Mohamed Fouda的文章《Uniswap的做市损益分析》。

与以前的去中心化交易所\(DEXs\)不同，开放式金融\(DeFi\)的代表之一Uniswap推出了一种用于交易ETH和其他ERC-20代币的新模式。正如赛勒斯•尤内西\(Cyrus Younessi\)形容的那样，Uniswap的独特性在于，它更像是一个经纪商，而不是一家交易所。在用户体验方面它无疑是非常突出的，Uniswap提供了一个非常简单和直观的用户界面，只需单击一个按钮，用户就能将ETH换成任何的ERC-20 token。Uniswap的另一独特之处在于，Uniswap虽然目前很火，但投资者却没有办法对其投资。

![](https://img.jinse.com/1680966_image3.png)

Uniswap在几个方面颠覆了传统的DeFi业务模式。和其他DeFi协议\(如Maker和Augur\)不同，Uniswap是没有自己的token的，完全去中心化，且交易产生的交易手续费不归公司或中间商所有，因此投资者无法通过对公司进行股权或购买项目token进行投资。Uniswap独特的模式使其自去年12月以来实现了稳定的增长，这从交易量和流动性\(智能合约中锁定的ETH和token数量\)就可以看出。

![](https://img.jinse.com/1680967_image3.png)

_**1**_

**如何在Uniswap上做市？**

为了在Uniswap交易所产生的价值上分一杯羹，用户需要通过不断的买卖行为向交易所提供流动性，这就是所谓的做市。在传统交易所，做市商\(MMs\)从价差中获利。虽然做市商通常是盈利的，但如果资产价格在短时间内大幅波动也会有赔钱的风险。

**Uniswap的做市过程是自动化的**。用户只需向交易所的流动性池提交一笔钱，Uniswap 智能合约就可以自动完成做市。需要注意的是，向流动性池中注入资产时必须是双向委托，也就是说你不能只向交易对的一方提供流动性。因此，如果做市商想向ETH -DAI市场投入100美金，那么其中一半（50美金）将投入DAI，另一半必须以当前市场价格投入ETH。这些资金将注入Uniswap的流动资金池，以增加可用于交易的ETH和DAI的数量。在撰写本文时，该池拥有5,211 ETH和710,951 DAI，总价值约140万美元。

作为帮助提高资产流动性的回报，做市商\(MM\)可以收到代表其在流动性池所有权份额的流动性token。Uniswap的用户界面会清楚地显示做市商将获得多少流动性token，例如下图所示，每帮助增加100美元的流动性，做市商将获得约0.29美元的流动性token，约占Uniswap ETH - DAI流动性池的0.007%。当交易员使用Uniswap进行ETH和DAI之间的交易时，会向交易员收取0.3%的交易费用，这部分交易费用会被自动累计到流动性池中。**由于不会生成新的流动性代币，随着资产的流动性增强，做市商手中的流动性token也会相应增值。**从这个意义上说，Uniswap与传统的交易所不同，交易手续费不归交易所本身或Uniswap团队所有，而是分给了为资金池提供流动资金的做市商。做市商可以通过提取流动性token并兑换成相应的流动性池份额，随时销毁全部或部分流动性token。

![](https://img.jinse.com/1680968_image3.png)

_**2**_

**这样看来，做市是不是很赚？**

利用Uniswap做市赚钱听起来像是一个非常有利可图的生意。一方面他降低了门槛，让个人和散户投资者有机会像金融机构一样，通过做市来赚钱。另一方面，这个“生意”是在一个去中心化平台上进行的，交易是匿名的，且用户的钱不会被没收或审查。

这样看来，Uniswap做市对散户投资者来说是一个有趣的投资机会，但这并非没有陷阱。一般来说，做市是一项复杂的活动，在标的资产价格出现大幅方向性波动的情况下，做市有赔钱的风险。Uniswap使用的自动做市协议\(AMM\)也是如此。它采用一种被称为恒定乘积做市（Constant Product Market Maker）的方法，使ETH和DAI的乘积在流动性池中保持为一个常数。**ETH/DAI交易对的价格即为智能合约中ETH流动性池规模与DAI流动性池规模的比值**。

例如，如果智能合约中有13万DAI和1000 ETH，那么ETH的价格就是130DAI。如果ETH的市场价格上涨到150美元，Uniswap 智能合约无法感知价格的变化，并继续以130DAI的价格提供ETH。此时套利者就会马上蜂拥至Uniswap交易所，用DAI购买ETH\(减少ETH流动性池的规模，增加DAI流动性池的规模\)。在这个过程中，他们很乐意支付0.3%的交易费和燃料（gas）费。正是这种套利机会让Uniswap交易所的交易量迅速增长。但是现在的问题是，做市商是否正在从这种交易活动中赚钱呢？

这个问题之前Pintail已经在几篇文章中探讨过，他主要讨论了做市商的盈利能力是如何受到价格变化的影响，但没有考虑累积交易费用的影响。为了计算包括交易所交易费用影响在内的损益率（P / L），下面我将使用数值模型（numerical model）进行分析，在ETH初始价格为130美元时，通过Uniswap进行做市的损益率（P / L）是多少。

假设做市商向流动性池注入100美金\(50%的ETH和50%的DAI\)，来计算一段时间内做市的损益率（P / L），**即做市商流动性token的价值和无做市情况下初始的ETH/DAI的价值（均为美元计价）**之间的差异。要计算前者，模型如下:

1.使用Uniswap 自动做市协议（AMM）下的恒定乘积模型确定价格变动后的ETH和DAI流动性池的规模。 2.确定由于交易活动而注入到流动性池中的费用，一般来说是交易量的 0.3% 。该模型假设价格变动期间交易量不变。 3.计算流动性池中做市商所占的份额，即做市商持有的流动性token与流动性token总数之比。为了简单起见，假定流动性池的规模在ETH价格变动期间不变。

![](https://img.jinse.com/1680969_image3.png)

我们来看一下运用上述模型作图后，反映出的信息：

1）首先不难看出，当ETH价格增减一个相同比例时，产生的效果几乎相同，例如，在交易量为800万美元的情况下，ETH价格增减20%都将带来约2%的利润。 2）第二个观察结果，当最终资产价格\(在本例中为ETH\)与做市商提供的流动性价格相同时，最为有利可图。 3）当价格发生重大变化时，尤其是在交易量同时还较低的时候，做市活动会让做市商蒙受损失，这就不如持有资产来的更为有利。 4）正如预测的那样，交易量越大，交易手续费越高，做市业务的利润也就越高。

![](https://img.jinse.com/1680970_image3.png)

我们再来看一个真实世界的例子。比如有一个随机的ETH地址向Uniswap ETH/DAI流动性池中注入了流动性，此时我们就可以使用链上数据来追踪这个ETH地址，并计算该地址的损益率（P / L）。例如，2月14日一个做市商为ETH/DAI流动性池提供了1个ETH,123DAI的流动性，收到了0.763枚流动性token作为回报。3月4日，在520万美元的交易量下，经过两周多的流动性供应，此时的流动性token价值0.99 ETH和128 DAI，总价值约256美元。如果不做市，该用户将拥有123 DAI和1 ETH，总价值约为251美元。如果该用户决定收回他们的流动性，他们将在大约两周内收获约2%的利润。由于本例中的最终ETH价格非常接近于提供流动性时的价格，因此实现的理想状态下的利润率。

![](https://img.jinse.com/1680971_image3.png)

当然，做市商们也有可能采用更复杂的策略，比如随着价格的变化而逐步增加或减少供应的流动性，以获得更多的利润。这种情况是可能的，因为Uniswap 智能合约中允许做市商随时增加或减少流动性。不难预测，许多公司和基金之后应该会使用这种策略，利用其管理的ERC-20 token余额实现额外收益。其他可能从此类金融产品中受益的参与者包括提供资产托管服务的第三方和拥有大量ETH储备的项目方。DeFi工具允许这些参与者在没有中介的情况下通过去中心化和最小化信任成本的智能合约实现少量的被动收入。

总而言之，像Uniswap这样的DeFi协议将引领资产配置和管理的创新浪潮。然而，应该明确的是，尽管DeFi为散户投资者提供了一个独特的机会，让他们和金融服务提供商一样可以发挥更大的作用，但这些投资者需要意识到潜在的风险。他们需要花足够的时间研究他们所从事的活动以识别风险，并制定策略来减轻这些风险，实现利润最大化。

（完）

原文：

https://www.tokendaily.co/blog/pnl-analysis-of-uniswap-market-making?nsukey=3zR8Y7h34XUmuaqDjGc0P14Qk5AxOVeWc%2Beyn7pLngeLwXm7eCfQS9IXNaaAZqIQUxYPqMk%2FPtPMGUTpDbLPgaXdw3EHnq8UrXjYAFeuwooGCqYPZ7JcRy2Eyb1vfJrBvbXGfE1JbjFh%2Fsp4qKSG3jU2lZBQs%2Fy3q6uDn2xzLD%2Fxt%2BX8Yr1X05pYBlvD16VMc2N%2BDA%2Bd29PmhflylHVhEA%3D%3D

作者：Mohamed Fouda

翻译：Jessie

